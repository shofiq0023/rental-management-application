<div class="blog-list">
    <h2 class="mb-3">List of Buildings</h2>

    <a routerLink="/add-building" class="mb-4" mat-flat-button color="primary">
        <mat-icon>add</mat-icon>
        Add a new building
    </a>

    <div class="mat-elevation-z2 custom-table">
        <mat-progress-bar mode="indeterminate" *ngIf="isLoading"></mat-progress-bar>

        <mat-table [dataSource]="listData" matSort>

            <ng-container matColumnDef="num">
                <mat-header-cell *matHeaderCellDef>#</mat-header-cell>
                <mat-cell *matCellDef="let data; let i = index">
                    {{i + 1}}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="name">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Building Name</mat-header-cell>
                <mat-cell *matCellDef="let data">
                    {{data.name}}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="address">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Address</mat-header-cell>
                <mat-cell *matCellDef="let data">
                    {{data.address}}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="flats">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Total flats</mat-header-cell>
                <mat-cell *matCellDef="let data">
                    {{data.flats.length}}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="actions">
                <mat-header-cell *matHeaderCellDef>Actions</mat-header-cell>
                <mat-cell *matCellDef="let data">
                    <button mat-icon-button class="text-danger" (click)="openDialog(data.id)">
                        <mat-icon>delete</mat-icon>
                    </button>
                </mat-cell>
            </ng-container>

            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>

        </mat-table>

        <div class="text-center pt-2" *ngIf="!isLoading && listData.data.length === 0">
            <p>No building found.</p>
        </div>

        <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" [pageSize]="10" showFirstLastButtons></mat-paginator>
    </div>

</div>